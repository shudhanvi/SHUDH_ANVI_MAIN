<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manhole Network Analytics Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .chart-container {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .map-container {
            text-align: center;
        }

            .map-container img {
                max-width: 100%;
                height: auto;
                border-radius: 4px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

        h1, h2, h3 {
            color: #2c3e50;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Manhole Network Analytics Report</h1>
            <p>Comprehensive analysis of manhole network, operational records, and area data for Hasmathnagar, Hyderabad.</p>
        </div>

        <!-- New Section: Geographical and Land Use Analysis -->
        <h2>Geographical and Land Use Analysis</h2>

        <h3>Ward Area Overview</h3>
        <p>The total area of the Hasmathnagar ward is <strong>726,916.255 sq m</strong>.</p>
        <p>
            The total identified slum area is <strong>82,350.66 sq m</strong>, which includes three distinct areas. The water body has an area of <strong>178,908.154 sq m</strong> and a perimeter of <strong>2,273.81 m</strong>.
        </p>

        <div class="chart-grid">
            <div class="chart-container">
                <h3>Distribution of Land Use within the Ward</h3>
                <canvas id="landUseChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Comparative Slum Area Sizes</h3>
                <canvas id="slumAreaChart"></canvas>
            </div>
        </div>

        <h3>Maps of Hasmathnagar Ward</h3>
        <div class="map-grid">
            <div class="map-container">
                <h4>Land Use Map</h4>
                <img src="land_use_map.jpg" content-fetch-id="uploaded:land_use_map.jpg-655f04d7-4931-48a1-87e7-27de19f7d783" alt="Map showing different land use types in Hasmathnagar">
            </div>
            <div class="map-container">
                <h4>Impervious Layer Map</h4>
                <img src="impervious_layer.jpg" content-fetch-id="uploaded:impervious_layer.jpg-472d81cf-7434-456b-8366-eff795e69c20" alt="Map showing impervious surfaces">
            </div>
            <div class="map-container">
                <h4>Slope Map</h4>
                <img src="slope_map.jpg" content-fetch-id="uploaded:slope_map.jpg-6b5abc69-bad7-4220-991b-0ad303c35605" alt="Map showing the slope of the terrain">
            </div>
            <div class="map-container">
                <h4>Ward Map with Hotspots</h4>
                <img src="ward_map_hotspot.jpg" content-fetch-id="uploaded:ward_map_hotspot.jpg-e5cf13ce-a2f7-4c4b-a3bd-57eb9419a85d" alt="Map of the ward with clogging hotspots">
            </div>
            <div class="map-container">
                <h4>Ward Map with Robo Deployment</h4>
                <img src="ward_map_robos.jpg" content-fetch-id="uploaded:ward_map_robos.jpg-d2ad5315-5fb4-4497-b2a9-3f5637ab8515" alt="Map of the ward showing robo deployment locations">
            </div>
        </div>

        <!-- Existing sections remain below -->
        <h2>Network and Manhole Health Overview</h2>
        <div class="chart-grid">
            <div class="chart-container">
                <h3>Junction Type Distribution</h3>
                <canvas id="junctionTypeChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Manhole Condition Distribution</h3>
                <canvas id="conditionChart"></canvas>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-container">
                <h3>Sewer Length by Area Type</h3>
                <canvas id="sewerLengthChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Clogging Incidents by Junction Type</h3>
                <canvas id="cloggingByJunctionChart"></canvas>
            </div>
        </div>
        <h2>Operational Performance & Clogging Analysis</h2>
        <div class="chart-grid">
            <div class="chart-container">
                <h3>Average Waste Collected by Blockage Level</h3>
                <canvas id="wasteChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Average Operation Time by Robo</h3>
                <canvas id="roboOpTimeChart"></canvas>
            </div>
        </div>
        <h2>Detailed Data Insights</h2>
        <h3>Top 5 Manholes by Clogging Incidents</h3>
        <table border="1" class="dataframe">
            <thead>
                <tr style="text-align: right;">
                    <th>id</th>
                    <th>history_of_clogging_incidents</th>
                    <th>condition</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>MH-0016</td>
                    <td>8</td>
                    <td>Good</td>
                </tr>
                <tr>
                    <td>MH-0049</td>
                    <td>8</td>
                    <td>Good</td>
                </tr>
                <tr>
                    <td>MH-0025</td>
                    <td>8</td>
                    <td>Good</td>
                </tr>
                <tr>
                    <td>MH-0024</td>
                    <td>8</td>
                    <td>Fair</td>
                </tr>
                <tr>
                    <td>MH-0044</td>
                    <td>8</td>
                    <td>Fair</td>
                </tr>
            </tbody>
        </table>
        <h3>Sewer Area Summary</h3>
        <table border="1" class="dataframe">
            <thead>
                <tr style="text-align: right;">
                    <th>area_name</th>
                    <th>type_of_area</th>
                    <th>sewer_length_km</th>
                    <th>num_robos_deployed</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Hasmathnagar, Hyderabad</td>
                    <td>Residential</td>
                    <td>12.93</td>
                    <td>10</td>
                </tr>
                <tr>
                    <td>Hasmathnagar, Hyderabad</td>
                    <td>Slum</td>
                    <td>12.87</td>
                    <td>10</td>
                </tr>
                <tr>
                    <td>Hasmathnagar, Hyderabad</td>
                    <td>Waterbody</td>
                    <td>16.23</td>
                    <td>10</td>
                </tr>
                <tr>
                    <td>Hasmathnagar, Hyderabad</td>
                    <td>Residential</td>
                    <td>11.84</td>
                    <td>10</td>
                </tr>
                <tr>
                    <td>Hasmathnagar, Hyderabad</td>
                    <td>Slum</td>
                    <td>17.55</td>
                    <td>10</td>
                </tr>
            </tbody>
        </table>
    </div>
    <script>
        const colors = ['#4e79a7', '#f28e2c', '#e15759', '#76b7b2', '#59a14f', '#edc948', '#b07aa1', '#ff9da7', '#9c755f', '#bab0ac'];

        // Junction Type Pie Chart
        new Chart(document.getElementById('junctionTypeChart'), {
            type: 'pie',
            data: {
                labels: ["Y-Junction", "Bend", "Multi-Inlet", "Straight", "Cross-Junction"],
                datasets: [{
                    data: [12, 11, 10, 9, 8],
                    backgroundColor:  [colors[3], colors[4], colors[2], colors[8] ,colors[9]]
                }]
            }
        });

        // Manhole Condition Pie Chart
        new Chart(document.getElementById('conditionChart'), {
            type: 'pie',
            data: {
                labels: ["Fair", "Good", "Poor", "Critical"],
                datasets: [{
                    data: [22, 10, 10, 8],
                    backgroundColor: [colors[3], colors[6], colors[5], colors[2]]
                }]
            }
        });
        // Sewer Length by Area Type Bar Chart
        new Chart(document.getElementById('sewerLengthChart'), {
            type: 'bar',
            data: {
                labels: ["Residential", "Slum", "Waterbody"],
                datasets: [{
                    label: 'Sewer Length (km)',
                    data: [24.77, 30.42, 16.23],
                    backgroundColor: colors[2]
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
        // Clogging Incidents by Junction Type Bar Chart
        new Chart(document.getElementById('cloggingByJunctionChart'), {
            type: 'bar',
            data: {
                labels: ["Bend", "Cross-Junction", "Multi-Inlet", "Straight", "Y-Junction"],
                datasets: [{
                    label: 'Total Clogging Incidents',
                    data: [59, 33, 41, 42, 50],
                    backgroundColor: colors[3]
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
        // Average Waste Collected by Blockage Level Bar Chart
        new Chart(document.getElementById('wasteChart'), {
            type: 'bar',
            data: {
                labels: ["high", "low", "medium"],
                datasets: [{
                    label: 'Avg. Waste Collected (kg)',
                    data: [5.77, 5.82, 6.33],
                    backgroundColor: colors[0]
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    // Average Operation Time by Robo Bar Chart
new Chart(document.getElementById('roboOpTimeChart'), {
    type: 'bar',
    data: {
        labels: ["sb_006", "sb_010", "sb_003", "sb_005", "sb_004", "sb_009", "sb_007", "sb_001", "sb_008", "sb_002"],
        datasets: [{
            label: 'Avg. Operation Time (mins)',
            data: [22.06, 22.41, 22.48, 22.56, 22.59, 22.6, 22.86, 23.0, 23.31, 24.08],
            backgroundColor: "rgba(144, 238, 144, 0.8)" // light green
        }]
    },
    options: {
        responsive: true,
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

        // New Chart: Land Use Distribution Pie Chart
        new Chart(document.getElementById('landUseChart'), {
            type: 'pie',
            data: {
                labels: ["Slum Area", "Waterbody Area", "Other Area"],
                datasets: [{
                    data: [82350.66, 178908.154, 465657.441],
                    backgroundColor: [colors[0], colors[3], colors[2]]
                }]
            },
            options: {
                responsive: true,
            }
        });

        // New Chart: Comparative Slum Area Sizes Bar Chart
        new Chart(document.getElementById('slumAreaChart'), {
            type: 'bar',
            data: {
                labels: ["Slum Area 1", "Slum Area 2", "Slum Area 3"],
                datasets: [{
                    label: 'Area (sq m)',
                    data: [27253.19, 18565.17, 36532.30],
                    backgroundColor: [colors[3], colors[4], colors[5]]
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Area (sq m)'
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>